---
title:      "Introduction to R"
subtitle:   "Université Côte d'Azur - MSc Programme in Economics"
author:     "Mattia Guerini"
date:       "2019/2020 - fall semester"
output:     beamer_presentation
theme:      boxes
colortheme: dolphin
fonttheme:  serif
toc:        TRUE
---

```{r setup, include=FALSE, echo=FALSE}
library(knitr)
opts_chunk$set(echo = FALSE)
```

## Schedule 

- 17th of September 9-12

- 14th of October 9-12

- 28th of October 13-16

## Rules of the game

- arrive on time

- 20 minutes break

- homeworks

- no book (plenty of open source resources on-line)

# Introduction 

## What is R 
R is both a programming language and software environment for statistical computing, which is free and open-source. 

The \emph{R Project} was initiated by Robert Gentleman and Ross Ihaka (University of Auckland) in the early 1990s as a different implementation of the S language.

Since 1997, R has been developed by the \emph{R Development Core Team}.

R is platform independent and can run on Microsoft Windows, Mac OS and Unix/Linux systems.

## Getting Started 
To get started, you'll need to install two pieces of software:

- R, the actual programming language. <https://cran.r-project.org>

- RStudio, an excellent IDE for working with R. <https://www.rstudio.com>

Why RStudio?\footnote{\scriptsize You must have installed R before using RStudio.}

- Easier to use (everything is in one space)

- Many useful integrations (e.g. shiny, R-projects, R-markdown, ...)

- Plenty of shortcuts (alt + shift + k)

- Plenty of cheatsheets (see top panel)

## Screenshot of RConsole 
![RConsole](~/Google Drive/T_2019c_UCA_ETRICS/figures/r_console.png)

## Screenshot of RStudio 
![RStudio](~/Google Drive/T_2019c_UCA_ETRICS/figures/r_studio.png)

## Glossary 
- \emph{command}: user input (text or numbers) that R understands

- \emph{script}: a sequence of commands collected in a text file, each separated by a new line

- \emph{environment}: a list of named variables that we have generated by means of commands

- \emph{history}: the list of past commands thaty we have used 

- \emph{help}: a documentation of all the functions in R (the user manual)

- \emph{package}: a collection of additional functions and dataset

## R as a calculator (I) 
\footnotesize
```{r calculator1, include=T, echo=T}
2+2
2-2
2*2
2/2
```
\normalsize

## R as a calculator (II) 
\footnotesize
```{r calculator2, include=T, echo=T}
log(1)
exp(1)
log(exp(1))
sqrt(25)
```
\normalsize

## The help 
\footnotesize
```{r help, include=T, echo=T}
?log
help(log)
```
\normalsize

Otherwise:

- Google your error message

- Ask for help in Stack Overflow

## Packages 
R comes with a number of built-in functions and datasets, but one of the main strengths of R as an open-source project is its package system. 

Packages add additional functions and datasets. 

Frequently if you want to do something in R, and it is not available by default, there is a good chance that there is a package that will fulfill your needs.

You can install packages using the command `install.packages()`

You can load packages using the command `library()`

# Data structures 

## Data types 

- Numeric/Double (e.g. 2.5, 1/5, 1.0, \dots)

- Integer (e.g. 1, 2, 3, \dots)

- Complex (e.g. 1 + 2i, \dots)

- Logical (e.g. TRUE, FALSE or NA)

- Character (e.g. "a", "b", "paper", \dots)

- Factor/Categorical ("male", "female", \dots)

## Data structures 
![Visualization of data structures](~/Google Drive/T_2019c_UCA_ETRICS/figures/r_data_structures.png)

## Vectors (I)

You can create a vector using the command `c()`
\footnotesize
```{r vectors_base, include=T, echo=T}
x <- c(1, 3, 5, 10)
x
```
\normalsize

Vectors must contain elements of the same data type.
\footnotesize
```{r vectors_type, include=T, echo=T}
c(1, "intro", TRUE)
```
\normalsize

You can measure the lenght of a vector using the command `length()`
\footnotesize
```{r vectors_length, include=T, echo=T}
length(x)
```
\normalsize

## Vectors (II)
It is also possible to easily create sequences
\footnotesize
```{r vectors_sequences, include=T, echo=T}
1:10
seq(from = 1, to = 2, by = 0.1)
rep("A", times = 5) 
```
\normalsize

## Vectors (III)
You can combine different vectors
\footnotesize
```{r vectors_multiple, include=T, echo=T}
x <- 1:3 # from 1 to 3
y <- c(10, 15) # 10 and 11
z <- c(x,y) # x first and then y
z
```
\normalsize

And you can repeat vectors (or its elements)
\footnotesize
```{r vectors_repeat, include=T, echo=T}
z <- rep(y, each=3) # repeat each element 3 times
z
z <- rep(y, times=3) # repeat the whole vector 3 times
z
```
\normalsize

## Subsetting Vectors
\footnotesize
```{r vectors_subset, include=T, echo=T}
x <- c(1,5,10,7) 
x < 6 # elements lower than 6?
x == 10 # elements equal to 10?
x[2] # element in the second position?
x[1:2] # elements in the first 2 positions?
x[c(1,3,4)] # elements in position 1, 3, 4?
```
\normalsize

## Vectors' Operations
\footnotesize
```{r vectors_operations, include=T, echo=T}
x <- c(1,5,10,7)
x+2 # adds a scalar to all elements
x^2 # squares all elements
```
\normalsize

## Matrices (I)
You can create a matrix using the command `matrix()`
\footnotesize
```{r matrix, include=T, echo=T}
X <- matrix(1:9, nrow = 3, ncol = 3)
X
```
\normalsize

## Matrices (II)
R automatically inserts elements by columns, but we can ask to include by rows
\footnotesize
```{r matrix_byrow, include=T, echo=T}
X <- matrix(1:9, nrow = 3, ncol = 3, byrow = TRUE)
X
```
\normalsize

You don't even have to specify the options names
\footnotesize
```{r matrix_silent, include=T, echo=T}
X <- matrix(1:8, 2, 4, T)
X
```
\normalsize

## Matrices (III)
Matrices can also be created by combining vectors
\footnotesize
```{r matrix_fromvectors, include=T, echo=T}
X <- cbind(1:4, 6:9) # binds them as columns
X
X <- rbind(1:4, 6:9) # binds them as rows
X
```
\normalsize

## Subsetting Matrices
\footnotesize
```{r matrix_subset, include=T, echo=T}
X>5 # elements larger than 5
X[1,4] # element of first row, fourth column?
X[1,] # element in the first row?
X[,2] # elements in the second columns?
```
\normalsize

## Matrices' Operations (I)
Let's create two matrices `X` and `Y`:
\footnotesize
```{r matrix_operations1, include=T, echo=T}
x <- c(1,5,4,9)
y <- c(2,4,1,3)
X <- matrix(x, 2, 2)
Y <- matrix(y, 2, 2)
X
Y
```
\normalsize

## Matrices' Operations (II)
\footnotesize
```{r matrix_operations2, include=T, echo=T}
X+Y   # element by element (also subtraction is equal)
X*Y   # element by element multiplication
X%*%Y # matrix multiplication
```
\normalsize

## Matrices' Operations (III)
\footnotesize
```{r matrix_operations3, include=T, echo=T}
solve(Y) # inverse
t(X) # transpose
```
\normalsize

## Arrays (I)
\footnotesize
```{r arrays, include=T, echo=T}
x <- 1:4
X <- array(data = x, dim = c(2,3,2))
X
```
\normalsize

## Notes about the Arrays

- Remember that vectors, matrices and arrays can include only data types of the same kind.

- An 3D array is basically a combination of matrices each laid on top of other (e.g. write N matrix in N different pages in your notebook)

- A 4D array is basically a combination of arrays each laid on top of other (e.g. take two notebooks of 3D arrays)

- A 5D array ...

- Pay attention to the `recycling rule`

## Lists
A list is a one-dimensional heterogeneous data structure.

It is indexed like a vector with a single integer value (or a name), but each element can contain an element of any data type.
\footnotesize
```{r list, include=T, echo=T}
x <- 1:4
y <- c("a", "b", "c")
L <- list(numbers = x, letters = y)
L
```
\normalsize

## Subsetting Lists
\footnotesize
```{r list_subsetting, include=T, echo=T}
L[[1]] # extract the first element
L$numbers # extract the element called numbers
L$letters # extract the element called letters
```
\normalsize

You can even "work" with the subsetted element:
\footnotesize
```{r list_subsetting2, include=T, echo=T}
L$numbers[1:3] > 2
```
\normalsize

<!-- ## Data Frames (I) -->
<!-- A `data.frame` is similar to a typical `spreadsheet` in excel.  -->

<!-- There are rows, and there are columns.  -->

<!-- A row is typically thought of as an \emph{observation}. -->

<!-- A column is a certain \emph{variable}, characteristic or feature of that observation. -->

<!-- ## Data Frames (II) -->
<!-- A data frame is a list of column vectors where: -->

<!-- - each column has a name -->

<!-- - each column must contain the same data type, but the different columns can store different data types. -->

<!-- - each column must be of same length -->

<!-- ## Data Frames (III)  -->
<!-- \scriptsize -->
<!-- ```{r dataframe, include=T, echo=T} -->
<!-- set.seed(1) -->
<!-- df <-  data.frame(id = 1:5,  -->
<!--   name = c("Ted", "Barney", "Lily", "Marshall", "Robin"), -->
<!--   surname = c("Mosby", "Stinson", "Aldrin", "Eriksen", "Scherbatsky"), -->
<!--   wage = rnorm(n=5, mean = 1000, sd = 100), # normal random sample -->
<!--   origin = c("Cleveland", "New York", "New York", "St. Cloud", "Canada"), -->
<!--   male = c(T, T, F, T, F) -->
<!--   ) -->
<!-- df -->
<!-- ``` -->
<!-- \normalsize -->

<!-- You can verify the size of the `data.frame` using the command `dim()` -->

<!-- You can get the `data type` info using the command `str()` -->

<!-- ## Subsetting Data Frames (I) -->
<!-- \footnotesize -->
<!-- ```{r dataframe_subset, include=T, echo=T} -->
<!-- df$name # subset a column -->
<!-- df[,c(2,5)] # can also subset like a matrix -->
<!-- ``` -->
<!-- \normalsize -->

<!-- ## Subsetting Data Frames (II) -->
<!-- \footnotesize -->
<!-- ```{r dataframe_subset2, include=T, echo=T} -->
<!-- head(df, n=3) # first n observations -->
<!-- tail(df, n=3) # last n observations -->
<!-- ``` -->
<!-- \normalsize -->

<!-- ## Inspecting data frames (I) -->
<!-- R comes with many data bases included. These can be used for learning R. -->

<!-- One of the most famous is the one called `mtcars`. -->
<!-- \scriptsize -->
<!-- ```{r dataframe_mtcars, include=T, echo=T} -->
<!-- head(mtcars) -->
<!-- dim(mtcars) -->
<!-- ``` -->
<!-- \normalsize -->

<!-- ## Inspecting data frames (II) -->
<!-- \scriptsize -->
<!-- ```{r dataframe_mtcars2, include=T, echo=T} -->
<!-- str(mtcars) -->
<!-- names(mtcars) -->
<!-- ``` -->
<!-- \normalsize -->

<!-- ## Subsetting data frames (III) -->
<!-- We are interesting in the cylinders and the weights of inefficient cars (lower than 15 miles per gallon). -->
<!-- \scriptsize -->
<!-- ```{r dataframe_subset_mtcars, include=T, echo=T} -->
<!-- poll_cars <- mtcars[mtcars$mpg<15, c("cyl", "wt")] -->
<!-- poll_cars -->
<!-- ``` -->
<!-- \normalsize -->

<!-- ## Subsetting data frames (IV) -->
<!-- Alternatively: -->
<!-- \scriptsize -->
<!-- ```{r dataframe_subset_mtcars2, include=T, echo=T} -->
<!-- poll_cars <- subset(mtcars, subset = mpg<15, select = c("cyl", "wt")) -->
<!-- poll_cars -->
<!-- ``` -->
<!-- \normalsize -->

# Basic Programming

# Plotting (`ggplot2` library)

# Working with Data (`tydiverse` and `reshape2` libraries)
